{% extends 'base.html.twig' %}

{% block stylesheets %}
    {{ parent() }}
{% endblock %}

{% block info %}
    <div class="row counters">
        <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12" id="linkVenta" style="cursor: pointer;margin-top: 20px">
            {% if app.session.get('totalEstimadoVenta') == 0 %}
                <div class="dashboard-stat grey">
            {% elseif app.session.get('aprobadoPlanVentas') %}
                <div class="dashboard-stat  green-haze">
            {% else  %}
                <div class="dashboard-stat  {{ app.session.get('aprobarEstimadoVenta') ? 'red-flamingo' : 'yellow-crusta' }}">
            {% endif %}
                <div class="visual">
                    <i class="icon icon-basket-loaded"></i>
                </div>
                <div class="details">
                    <div class="number" data-toggle="counter-up" id="nameVentas">
                        {{ app.session.get('totalEstimadoVenta')|number_format(0, '.', ',') }}
                    </div>
                    <div class="desc">
                        <strong>VENTAS</strong>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12" id="linkSalario" style="cursor: pointer;margin-top: 20px">
            {% if app.session.get('totalEstimadoRecursosHumanos') == 0 %}
               <div class="dashboard-stat grey">
            {% elseif app.session.get('aprobadoPlanRecursosHumanos') %}
               <div class="dashboard-stat  green-haze">
            {% else  %}
               <div class="dashboard-stat  {{ app.session.get('aprobarEstimadoRecursosHumanos') ? 'red-flamingo' : 'yellow-crusta' }}">
            {% endif %}
                <div class="visual">
                    <i class="fa fa-money"></i>
                </div>
                <div class="details">
                    <div class="number" data-toggle="counter-up" id="nameRecursosHumanos">
                        {{ app.session.get('totalEstimadoRecursosHumanos')|number_format(0, '.', ',') }}
                    </div>
                    <div class="desc">
                        <strong>SALARIO</strong>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12" id="linkCombustible" style="cursor: pointer;margin-top: 20px">
            {% if app.session.get('totalEstimadoCombustible') == 0 %}
               <div class="dashboard-stat grey">
            {% elseif app.session.get('aprobadoCombustible') %}
               <div class="dashboard-stat  green-haze">
            {% else  %}
               <div class="dashboard-stat  {{ app.session.get('aprobarEstimadoCombustible') ? 'red-flamingo' : 'yellow-crusta' }}">
            {% endif %}
                <div class="visual">
                    <i class="fa fa-automobile"></i>
                </div>
                <div class="details">
                    <div class="number" id="nameCombustible">
                        {{ app.session.get('totalEstimadoCombustible')|number_format(2, '.', ',') }}
                    </div>
                    <div class="desc">
                        <strong>COMBUSTIBLE</strong>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12" id="linkEnergia" style="cursor: pointer;margin-top: 20px">
            {% if app.session.get('totalEstimadoEnergia') == 0 %}
               <div class="dashboard-stat grey">
            {% elseif app.session.get('aprobadoPlanEnergia') %}
               <div class="dashboard-stat  green-haze">
            {% else  %}
               <div class="dashboard-stat  {{ app.session.get('aprobarEstimadoEnergia') ? 'red-flamingo' : 'yellow-crusta' }}">
            {% endif %}
                <div class="visual">
                    <i class="icon icon-bulb"></i>
                </div>
                <div class="details">
                    <div class="number" data-toggle="counter-up" id="nameEnergia">
                        {{ app.session.get('totalEstimadoEnergia')|number_format(0, '.', ',') }}
                    </div>
                    <div class="desc">
                        <strong>ENERGÍA</strong>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12" id="linkOtroGastos" style="cursor: pointer;margin-top: 20px">
            {% if app.session.get('totalEstimadoOtrosGastos') == 0 %}
               <div class="dashboard-stat grey">
            {% elseif app.session.get('aprobadoPlanOtrosGastos') %}
               <div class="dashboard-stat  green-haze">
            {% else  %}
               <div class="dashboard-stat  {{ app.session.get('aprobarEstimadoOtrosGastos') ? 'red-flamingo' : 'yellow-crusta' }}">
            {% endif %}
                <div class="visual">
                    <i class="fa fa-archive"></i>
                </div>
                <div class="details">
                    <div class="number" data-toggle="counter-up" id="nameOtrosGastos">
                        {{ app.session.get('totalEstimadoOtrosGastos')|number_format(0, '.', ',') }}
                    </div>
                    <div class="desc">
                        <strong>OTROS GASTOS</strong>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12" id="linkMateriasPrimas" style="cursor: pointer;margin-top: 20px">
            {% if app.session.get('totalEstimadoMateriaPrima') == 0 %}
               <div class="dashboard-stat grey">
            {% elseif app.session.get('aprobadoMateriaPrima') %}
               <div class="dashboard-stat  green-haze">
            {% else  %}
               <div class="dashboard-stat  {{ app.session.get('aprobarEstimadoMateriaPrima') ? 'red-flamingo' : 'yellow-crusta' }}">
            {% endif %}
                <div class="visual">
                    <i class="fa fa-slack"></i>
                </div>
                <div class="details">
                    <div class="number" data-toggle="counter-up" id="nameMateriasPrimas">
                        {{ app.session.get('totalEstimadoMateriaPrima')|number_format(0, '.', ',') }}
                    </div>
                    <div class="desc">
                        <strong>MATERIAS PRIMAS</strong>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12" id="linkDepreciacion" style="cursor: pointer;margin-top: 20px">
            {% if app.session.get('totalEstimadoDepreciacion') == 0 %}
               <div class="dashboard-stat grey">
            {% elseif app.session.get('aprobadoDepreciacion') %}
               <div class="dashboard-stat  green-haze">
            {% else  %}
               <div class="dashboard-stat  {{ app.session.get('aprobarEstimadoDepreciacion') ? 'red-flamingo' : 'yellow-crusta' }}">
            {% endif %}
                <div class="visual">
                    <i class="fa fa-recycle"></i>
                </div>
                <div class="details">
                    <div class="number" data-toggle="counter-up" id="nameDepreciacion">
                        {{ app.session.get('totalEstimadoDepreciacion')|number_format(0, '.', ',') }}
                    </div>
                    <div class="desc">
                        <strong>DEPRECIACIÓN</strong>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-2 col-md-3 col-sm-6 col-xs-12" id="linkAmortizacion" style="cursor: pointer;margin-top: 20px">
            {% if app.session.get('totalEstimadoAmortizacion') == 0 %}
               <div class="dashboard-stat grey">
            {% elseif app.session.get('aprobadoAmortizacion') %}
               <div class="dashboard-stat  green-haze">
            {% else  %}
               <div class="dashboard-stat  {{ app.session.get('aprobarEstimadoAmortizacion') ? 'red-flamingo' : 'yellow-crusta' }}">
            {% endif %}
                <div class="visual">
                    <i class="fa fa-bank"></i>
                </div>
                <div class="details">
                    <div class="number" data-toggle="counter-up" id="nameAmortizacion">
                        {{ app.session.get('totalEstimadoAmortizacion')|number_format(0, '.', ',') }}
                    </div>
                    <div class="desc">
                        <strong>AMORTIZACIÓN</strong>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block body %}
    <div class="preload hidden">
        <div class="logo"></div>
        <div class="loader-frame">
            <div class="loader1" id="loader1"></div>
            <div class="loader2" id="loader2"></div>
        </div>
    </div>
    <!-- BEGIN ROW -->
    <div class="row" id="dashboardInicio">
        <div class="col-lg-12 col-md-12 col-sm-12">
            <!-- BEGIN CHART PORTLET-->
            <div class="portlet light bordered sombreado" style="margin-top: 10px">
                <div class="portlet-title">
                    <div class="caption">
                        <span id="nameSeccion" class="caption-subject bold uppercase font-green-haze"> PLAN ESTIMADO DE INDICADORES PRINCIPALES </span>
                        <span id="nameSeccionHelp" class="caption-helper bold uppercase"
                              id="year">{{ app.session.get('yearActivo') }}</span>
                    </div>
                    <div class="tools">
                    <a href="{{ path('exportarPlanEstimadoDivision') }}"
                           class="fa fa-file-excel-o fa-2x font-green"
                           data-toggle="tooltip" data-placement="left" title="Exportar a Excel">  </a>
                        <a href="#" class="reload hidden" id="btnAtrasInicio" data-placement="top"
                           data-original-title="Reiniciar">
                        </a>
                    </div>
                </div>
                <div class="portlet-body" align="right" style="opacity: 0.2">
                    <img src="{{ asset('images/30.jpg') }}" class="img-responsive" >
                </div>
            </div>
            <!-- END CHART PORTLET-->
        </div>
    </div>
    <div id="dashboardVentas" style="display:none">
        <div class="row" style="margin-top: 40px">
            <div class="col-lg-12 col-md-12 col-sm-12">
                <!-- BEGIN CHART PORTLET-->
                <div class="portlet light bordered sombreado">
                    <div class="portlet-title">
                        <div class="caption">
                            <span id="nameDivisionVenta" class="caption-subject bold uppercase font-green-haze"> DISTRIBUCIÓN DEL PLAN DE VENTAS POR DIVISIONES</span>
                        </div>
                        <div class="tools">
                        <a href="{{ path('exportarPlanEstimadoDivisionVenta') }}"
                           class="fa fa-file-excel-o fa-2x font-green"
                           data-toggle="tooltip" data-placement="left" title="Exportar a Excel"></a>
                            <a href="#" class="reload hidden" id="btnAtrasDivisionVenta" data-placement="top"
                               data-original-title="Regresar">
                            </a>
                        </div>
                    </div>
                    <div class="portlet-body">
                        <div id="graficoDivisionVenta" class="chart" style="height: 250px;">
                        </div>
                    </div>
                </div>
                <!-- END CHART PORTLET-->
            </div>
        </div>
        <div class="row" style="margin-top: 40px">
            <div class="col-lg-12 col-md-12 col-sm-12">
                <!-- BEGIN CHART PORTLET-->
                <div class="portlet light bordered sombreado">
                    <div class="portlet-title">
                        <div class="caption">
                            <span id="nameDivisionVentaMensual" class="caption-subject bold uppercase font-green-haze"> DISTRIBUCIÓN MENSUAL DEL PLAN DE VENTAS</span>
                        </div>
                        <div class="tools">
                            <a href="#" class="reload hidden" id="btnAtrasDivisionVentaMensual" data-placement="top"
                               data-original-title="Reiniciar">
                            </a>
                        </div>
                    </div>
                    <div class="portlet-body">
                        <div id="graficoDivisionVentaMensual" class="chart" style="height: 250px;">
                        </div>
                    </div>
                </div>
                <!-- END CHART PORTLET-->
            </div>
        </div>
    </div>
    <div id="dashboardSalario" style="display:none">
        <div class="row" style="margin-top: 40px">
            <div class="col-lg-12 col-md-12 col-sm-12">
                <!-- BEGIN CHART PORTLET-->
                <div class="portlet light bordered sombreado">
                    <div class="portlet-title">
                        <div class="caption">
                            <span id="nameDivisionFondo" class="caption-subject bold uppercase font-green-haze"> DISTRIBUCIÓN DEL FONDO DE SALARIO POR DIVISIONES</span>
                        </div>
                        <div class="tools">
                        <a href="{{ path('exportarPlanEstimadoFondoSalario') }}"
                           class="fa fa-file-excel-o fa-2x font-green"
                           data-toggle="tooltip" data-placement="left" title="Exportar a Excel"></a>
                            <a href="#" class="reload hidden" id="btnAtrasDivisionFondo" data-placement="top"
                               data-original-title="Regresar">
                            </a>
                        </div>
                    </div>
                    <div class="portlet-body">
                        <div id="graficoDivisionFondo" class="chart" style="height: 250px;">
                        </div>
                    </div>
                </div>
                <!-- END CHART PORTLET-->
            </div>
        </div>
        <div class="row" style="margin-top: 40px">
            <div class="col-lg-12 col-md-12 col-sm-12">
                <!-- BEGIN CHART PORTLET-->
                <div class="portlet light bordered sombreado">
                    <div class="portlet-title">
                        <div class="caption">
                            <span id="nameDivisionFondoMensual" class="caption-subject bold uppercase font-green-haze"> DISTRIBUCIÓN MENSUAL DEL FONDO DE SALARIO</span>
                        </div>
                        <div class="tools">
                            <a href="#" class="reload hidden" id="btnAtrasDivisionFondoMensual" data-placement="top"
                               data-original-title="Reiniciar">
                            </a>
                        </div>
                    </div>
                    <div class="portlet-body">
                        <div id="graficoDivisionFondoMensual" class="chart" style="height: 250px;">
                        </div>
                    </div>
                </div>
                <!-- END CHART PORTLET-->
            </div>
        </div>
    </div>
    <div id="dashboardEnergia" style="display:none">
        <div class="row" style="margin-top: 40px">
            <div class="col-lg-12 col-md-12 col-sm-12">
                <!-- BEGIN CHART PORTLET-->
                <div class="portlet light bordered sombreado">
                    <div class="portlet-title">
                        <div class="caption">
                            <span id="nameDivisionEnergia" class="caption-subject bold uppercase font-green-haze"> DISTRIBUCIÓN DE LA ENERGÍA POR DIVISIONES</span>
                        </div>
                        <div class="tools">
                        <a href="#"
                           class="fa fa-file-excel-o fa-2x font-green"
                           data-toggle="tooltip" data-placement="left" title="Exportar a Excel"></a>
                            <a href="#" class="reload hidden" id="btnAtrasDivisionEnergia" data-placement="top"
                               data-original-title="Regresar">
                            </a>
                        </div>
                    </div>
                    <div class="portlet-body">
                        <div id="graficoDivisionEnergia" class="chart" style="height: 250px;">
                        </div>
                    </div>
                </div>
                <!-- END CHART PORTLET-->
            </div>
        </div>
        <div class="row" style="margin-top: 40px">
            <div class="col-lg-12 col-md-12 col-sm-12">
                <!-- BEGIN CHART PORTLET-->
                <div class="portlet light bordered sombreado">
                    <div class="portlet-title">
                        <div class="caption">
                            <span id="nameDivisionEnergiaMensual" class="caption-subject bold uppercase font-green-haze"> DISTRIBUCIÓN MENSUAL DE LA ENERGÍA</span>
                        </div>
                        <div class="tools">
                            <a href="#" class="reload hidden" id="btnAtrasDivisionEnergiaMensual" data-placement="top"
                               data-original-title="Reiniciar">
                            </a>
                        </div>
                    </div>
                    <div class="portlet-body">
                        <div id="graficoDivisionEnergiaMensual" class="chart" style="height: 250px;">
                        </div>
                    </div>
                </div>
                <!-- END CHART PORTLET-->
            </div>
        </div>
    </div>
    <div id="dashboardOtrosGastos" style="display:none">
        <div class="row" style="margin-top: 40px">
            <div class="col-lg-12 col-md-12 col-sm-12">
                <!-- BEGIN CHART PORTLET-->
                <div class="portlet light bordered sombreado">
                    <div class="portlet-title">
                        <div class="caption">
                            <span id="nameOtroGasto" class="caption-subject bold uppercase font-green-haze"> DISTRIBUCIÓN OTROS GASTOS MONETARIOS</span>
                        </div>
                        <div class="tools">
                             <a href="{{ path('exportarPlanEstimadoOtrosGastos') }}" class="fa fa-file-excel-o fa-2x font-green" data-toggle="tooltip" data-placement="left" title="Exportar a Excel">  </a>
                             <a href="#" class="reload hidden" id="btnAtrasOtroGasto" data-placement="top" data-original-title="Regresar"></a>
                             <a href="#" class="reload hidden" id="btnAtrasOtroGastoDivision" data-placement="top" data-original-title="Regresar"></a>
                        </div>
                    </div>
                    <div class="portlet-body">
                        <div id="graficoOtroGasto" class="chart" style="height: 250px;">
                        </div>
                    </div>
                </div>
                <!-- END CHART PORTLET-->
            </div>
        </div>
        <div class="row" style="margin-top: 40px">
            <div class="col-lg-12 col-md-12 col-sm-12">
                <!-- BEGIN CHART PORTLET-->
                <div class="portlet light bordered sombreado">
                    <div class="portlet-title">
                        <div class="caption">
                            <span id="nameOtroGastoMensual" class="caption-subject bold uppercase font-green-haze"> DISTRIBUCIÓN MENSUAL DE OTROS GASTOS MONETARIOS</span>
                        </div>
                    </div>
                    <div class="portlet-body">
                        <div id="graficoOtroGastoMensual" class="chart" style="height: 250px;">
                        </div>
                    </div>
                </div>
                <!-- END CHART PORTLET-->
            </div>
        </div>
    </div>
    <div id="dashboardMateriasPrimas" style="display:none">
        <div class="row" style="margin-top: 40px">
            <div class="col-lg-12 col-md-12 col-sm-12">
                <!-- BEGIN CHART PORTLET-->
                <div class="portlet light bordered sombreado">
                    <div class="portlet-title">
                        <div class="caption">
                            <span id="nameMateriaPrima" class="caption-subject bold uppercase font-green-haze"> DISTRIBUCIÓN MATERIAS PRIMAS</span>
                        </div>
                        <div class="tools">
                             <a href="{{ path('exportarPlanEstimadoMateriaPrima') }}" class="fa fa-file-excel-o fa-2x font-green" data-toggle="tooltip" data-placement="left" title="Exportar a Excel">  </a>
                             <a href="#" class="reload hidden" id="btnAtrasMateriaPrima" data-placement="top" data-original-title="Regresar"></a>
                        </div>
                    </div>
                    <div class="portlet-body">
                        <div id="graficoMateriaPrima" class="chart" style="height: 250px;">
                        </div>
                    </div>
                </div>
                <!-- END CHART PORTLET-->
            </div>
        </div>
        <div class="row" style="margin-top: 40px">
            <div class="col-lg-12 col-md-12 col-sm-12">
                <!-- BEGIN CHART PORTLET-->
                <div class="portlet light bordered sombreado">
                    <div class="portlet-title">
                        <div class="caption">
                            <span id="nameMateriaPrimaMensual" class="caption-subject bold uppercase font-green-haze"> DISTRIBUCIÓN MENSUAL DE MATERIAS PRIMAS</span>
                        </div>
                    </div>
                    <div class="portlet-body">
                        <div id="graficoMateriaPrimaMensual" class="chart" style="height: 250px;">
                        </div>
                    </div>
                </div>
                <!-- END CHART PORTLET-->
            </div>
        </div>
    </div>
    <div id="dashboardDepreciacion" style="display:none">
        <div class="row" style="margin-top: 40px">
            <div class="col-lg-12 col-md-12 col-sm-12">
                <!-- BEGIN CHART PORTLET-->
                <div class="portlet light bordered sombreado">
                    <div class="portlet-title">
                        <div class="caption">
                            <span id="nameDepreciacionMostrar" class="caption-subject bold uppercase font-green-haze"> DISTRIBUCIÓN DEPRECIACIÓN</span>
                        </div>
                        <div class="tools">
                             <a href="{{ path('exportarPlanEstimadoDepreciacion') }}" class="fa fa-file-excel-o fa-2x font-green" data-toggle="tooltip" data-placement="left" title="Exportar a Excel">  </a>
                             <a href="#" class="reload hidden" id="btnAtrasDepreciacion" data-placement="top" data-original-title="Regresar"></a>
                        </div>
                    </div>
                    <div class="portlet-body">
                        <div id="graficoDepreciacion" class="chart" style="height: 250px;">
                        </div>
                    </div>
                </div>
                <!-- END CHART PORTLET-->
            </div>
        </div>
        <div class="row" style="margin-top: 40px">
            <div class="col-lg-12 col-md-12 col-sm-12">
                <!-- BEGIN CHART PORTLET-->
                <div class="portlet light bordered sombreado">
                    <div class="portlet-title">
                        <div class="caption">
                            <span id="nameDepreciacionMensual" class="caption-subject bold uppercase font-green-haze"> DISTRIBUCIÓN MENSUAL DE DEPRECIACIÓN</span>
                        </div>
                    </div>
                    <div class="portlet-body">
                        <div id="graficoDepreciacionMensual" class="chart" style="height: 250px;">
                        </div>
                    </div>
                </div>
                <!-- END CHART PORTLET-->
            </div>
        </div>
    </div>
    <div id="dashboardAmortizacion" style="display:none">
        <div class="row" style="margin-top: 40px">
            <div class="col-lg-12 col-md-12 col-sm-12">
                <!-- BEGIN CHART PORTLET-->
                <div class="portlet light bordered sombreado">
                    <div class="portlet-title">
                        <div class="caption">
                            <span id="nameAmortizacionMostrar" class="caption-subject bold uppercase font-green-haze"> DISTRIBUCIÓN AMORTIZACIÓN</span>
                        </div>
                        <div class="tools">
                             <a href="{{ path('exportarPlanEstimadoAmortizacion') }}" class="fa fa-file-excel-o fa-2x font-green" data-toggle="tooltip" data-placement="left" title="Exportar a Excel">  </a>
                             <a href="#" class="reload hidden" id="btnAtrasAmortizacion" data-placement="top" data-original-title="Regresar"></a>
                        </div>
                    </div>
                    <div class="portlet-body">
                        <div id="graficoAmortizacion" class="chart" style="height: 250px;">
                        </div>
                    </div>
                </div>
                <!-- END CHART PORTLET-->
            </div>
        </div>
        <div class="row" style="margin-top: 40px">
            <div class="col-lg-12 col-md-12 col-sm-12">
                <!-- BEGIN CHART PORTLET-->
                <div class="portlet light bordered sombreado">
                    <div class="portlet-title">
                        <div class="caption">
                            <span id="nameAmortizacionMensual" class="caption-subject bold uppercase font-green-haze"> DISTRIBUCIÓN MENSUAL DE AMORTIZACIÓN</span>
                        </div>
                    </div>
                    <div class="portlet-body">
                        <div id="graficoAmortizacionMensual" class="chart" style="height: 250px;">
                        </div>
                    </div>
                </div>
                <!-- END CHART PORTLET-->
            </div>
        </div>
    </div>
    <!-- END ROW -->
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <!-- BEGIN GRAFICOS HIGHSTOCK LEVEL PLUGINS -->
    <script src="{{ asset('easyadmin/plugins/highstock/code/highstock.js') }}"></script>
    <script src="{{ asset('easyadmin/plugins/highstock/code/modules/annotations.js') }}"></script>
    <script src="{{ asset('easyadmin/plugins/highstock/code/modules/exporting.js') }}"></script>
    <script src="{{ asset('easyadmin/plugins/highstock/code/modules/export-data.js') }}"></script>
    <script src="{{ asset('easyadmin/plugins/highstock/code/modules/export-clientside.js') }}"></script>
    <!-- END  GRAFICOS HIGHSTOCK LEVEL PLUGINS -->
    <!-- BEGIN MI PLANTILLA  LEVEL PLUGINS -->
    <script src="{{ asset('easyadmin/plantilla1/js/waypoints.min.js') }}"></script>
    <script src="{{ asset('easyadmin/plantilla1/js/counterup.min.js') }}"></script>
    <!-- END GRAFICOS LEVEL PLUGINS -->

    <script>
        jQuery(document).ready(function () {

            (function () {
                {% if not (app.user.isActive) %}
                window.location.href = "{{ path('login') }}";
                {% endif %}
            })();

            // jQuery counterUp
            $('[data-toggle="counter-up"]').counterUp({
                delay: 10,
                time: 1000
            });

            //Declaracion de variables
            var divisionCentroCosto = '';
            var centroCosto = '';
            var idCentroCosto = 0;
            var n;
            //Ventas
            var totalEstimadoVentaDivision = [];
            var totalEstimadoVentaDivisionMes = [];
            var totalEstimadoVentaCentroCosto = [];
            var totalEstimadoVentaCentroCostoMes = [];
            //Salario
            var totalEstimadoFondoDivision = [];
            var totalEstimadoGSPPDivision = [];
            var totalEstimadoPTDivision = [];
            var totalEstimadoSMDivision = [];
            var totalEstimadoFondoDivisionMes = [];
            var totalEstimadoGSPPDivisionMes = [];
            var totalEstimadoPTDivisionMes = [];
            var totalEstimadoSMDivisionMes = [];
            var totalEstimadoFondoCentroCosto = [];
            var totalEstimadoGSPPCentroCosto = [];
            var totalEstimadoPTCentroCosto = [];
            var totalEstimadoSMCentroCosto = [];
            var totalEstimadoFondoCentroCostoMes = [];
            var totalEstimadoGSPPCentroCostoMes = [];
            var totalEstimadoPTCentroCostoMes = [];
            var totalEstimadoSMCentroCostoMes = [];
            //Energia
            var nameDivision = [];
            var nameCentro = [];
            var meses = [];
            var mesesCentroCosto = [];
            var totalEstimadoEnergiaDivision = [];
            var totalEstimadoKWDivision = [];
            var totalEstimadoEnergiaDivisionMes = [];
            var totalEstimadoKWDivisionMes = [];
            var totalEstimadoEnergiaCentroCosto = [];
            var totalEstimadoKWCentroCosto = [];
            var totalEstimadoEnergiaCentroCostoMes = [];
            var totalEstimadoKWCentroCostoMes = [];
            //Otros Gastos
            var totalEstimadoOtroGasto = [];
            var totalEstimadoOtroGastoMes = [];
            var totalEstimadoOtroGastoDivision = [];
            var totalEstimadoOtroGastoDivisionMes = [];
            var totalEstimadoOtroGastoCentroCosto = [];
            var totalEstimadoOtroGastoCentroCostoMes = [];
            var otroGasto = '';
            var idOtroGasto = 0;
            //Materias Primas
            var totalEstimadoMateriaPrimaDivision = [];
            var totalEstimadoMateriaPrimaDivisionMes = [];
            var totalEstimadoMateriaPrimaCentroCosto = [];
            var totalEstimadoMateriaPrimaCentroCostoMes = [];
            //Depreciacion
            var totalEstimadoDepreciacionDivision = [];
            var totalEstimadoDepreciacionDivisionMes = [];
            var totalEstimadoDepreciacionCentroCosto = [];
            var totalEstimadoDepreciacionCentroCostoMes = [];
            //Amortizacion
            var totalEstimadoAmortizacionDivision = [];
            var totalEstimadoAmortizacionDivisionMes = [];
            var totalEstimadoAmortizacionCentroCosto = [];
            var totalEstimadoAmortizacionCentroCostoMes = [];

            //Dashboard de gestion de Ventas

            $('#linkVenta').on("click", function () {
                $('#dashboardInicio').css("display", "none");
                $('#dashboardSalario').css("display", "none");
                $('#dashboardEnergia').css("display", "none");
                $('#dashboardOtrosGastos').css("display", "none");
                $('#dashboardMateriasPrimas').css("display", "none");
                $('#dashboardDepreciacion').css("display", "none");
                $('#dashboardAmortizacion').css("display", "none");
                $('#dashboardVentas').css("display", "block");
                graficoTotalEstimadoVentaDivision();
                graficoTotalEstimadoVentaDivisionMes();
            });

            $('#btnAtrasDivisionVenta').on("click", function () {
                $('#btnAtrasDivisionVenta').addClass('hidden');
                graficoTotalEstimadoVentaDivision();
                inicioMensualVentas();
                graficoTotalEstimadoVentaDivisionMes();
                $('#nameDivisionVenta').text(' DISTRIBUCIÓN DEL PLAN DE VENTAS POR DIVISIONES');
                $('#nameDivisionVentaMensual').text(' DISTRIBUCIÓN MENSUAL DEL PLAN DE VENTAS');
            });

            //Grafico principal de ventas por divisiones
            {% for graficoTotal in graficosTotalesEstimadosDivisionesVentas %}
            totalEstimadoVentaDivision.push({
                name: '{{ graficoTotal['nombre'] }}',
                y: parseInt('{{ graficoTotal['totalVentaDivision'] }}')
            });
            {% endfor %}

            //Grafico principal de ventas por meses
            {% for graficoTotal in graficosTotalesEstimadosMesesVentas %}
            totalEstimadoVentaDivisionMes.push({
                name: '{{ graficoTotal['mes'] }}',
                y: parseInt('{{ graficoTotal['presupuesto'] }}')
            });
            {% endfor %}

            //Inicio grafico mensual de ventas
            function inicioMensualVentas() {
                totalEstimadoVentaDivisionMes = [];
                {% for graficoTotal in graficosTotalesEstimadosMesesVentas %}
                        totalEstimadoVentaDivisionMes.push({
                        name: '{{ graficoTotal['mes'] }}',
                        y: parseInt('{{ graficoTotal['presupuesto'] }}')
                        });
                {% endfor %}
            }

            //Grafico general Plan de Ventas por divisiones
            function graficoTotalEstimadoVentaDivision() {
                var valorMax = totalEstimadoVentaDivision.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoVentaDivision.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoDivisionVenta', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: null
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        type: 'category',
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Presupuesto Estimado',
                            useHTML: true
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            getExtremesFromAll: true,
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, ',', '.');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>' + ' presupuesto asignado ' + '<b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Categorías",
                            "colorByPoint": true,
                            "data": totalEstimadoVentaDivision,
                            events: {
                                click: function (oEvent) {
                                    cargarDivision(oEvent.point.name, oEvent.point.y, oEvent.point.color);
                                }
                            }
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

            //Cargar el plan de ventas de la division seleccionada
            function cargarDivision(categoria, presupuesto, colorSeleccionado) {

                var idDivisionCentroCosto = '';

                //mostrar el total del presupuesto
                {% for division in divisionCentrosCostos %}
                    divisionCentroCosto = '{{ division.nombre }}';
                    if (divisionCentroCosto === categoria) {
                        idDivisionCentroCosto = {{ division.id }};
                    }
                {% endfor %}

                //mostrar si existe el grafico mensual

                $(".preload").removeClass('hidden');

                var mat_datos = {
                    idPlanEstimado: {{ app.session.get('idPlanEstimado') }},
                    division: idDivisionCentroCosto
                };

                $.ajax({
                    type: "POST",
                    dataType: "json",
                    url: '{{ path("dashboardVentaEstimadoDivisionMensual") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    var obj = JSON.parse(data);
                    var divisionMensual = obj['divisionMensual'];
                    var divisionCantroCosto = obj['divisionCentroCosto'];

                    totalEstimadoVentaDivisionMes = [];
                    for (n = 0; n < divisionMensual.length; n++) {
                        totalEstimadoVentaDivisionMes.push({
                            name: divisionMensual[n]['mes'],
                            y: parseFloat(divisionMensual[n]['totalVentaDivisionMes']),
                            color: colorSeleccionado
                        });
                    }

                    totalEstimadoVentaCentroCosto = [];
                    for (n = 0; n < divisionCantroCosto.length; n++) {
                        totalEstimadoVentaCentroCosto.push({
                            name: divisionCantroCosto[n]['nombre'],
                            y: parseFloat(divisionCantroCosto[n]['totalVentaCentroCosto']),
                            color: colorSeleccionado
                        });
                    }

                    $('#nameDivisionVenta').text(' DISTRIBUCIÓN DEL PLAN DE VENTAS EN LOS CENTROS DE COSTOS DE LA ' + categoria);
                    $('#nameDivisionVentaMensual').text(' DISTRIBUCIÓN MENSUAL DEL PLAN DE VENTAS EN LA ' + categoria);
                    $('#btnAtrasVentaMapa').addClass('hidden');
                    $('#btnAtrasDivisionVenta').removeClass('hidden');

                    graficoTotalEstimadoVentaDivisionMes();
                    graficoTotalEstimadoVentaCentroCosto();

                });
            }

            //Grafico Plan de Ventas Mensual por divisiones
            function graficoTotalEstimadoVentaDivisionMes() {
                var valorMax = totalEstimadoVentaDivisionMes.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoVentaDivisionMes.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoDivisionVentaMensual', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: null
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        type: 'category',
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Presupuesto Estimado',
                            useHTML: true
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            getExtremesFromAll: true,
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, ',', '.');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>' + ' presupuesto asignado ' + '<b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Categorías",
                            "colorByPoint": true,
                            "data": totalEstimadoVentaDivisionMes
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

            //Cargar el plan de ventas de la division seleccionada
            function cargarCentroCosto(categoria, presupuesto, colorSeleccionado) {

                //mostrar el total del presupuesto
                {% for centro in centrosCostos %}
                    centroCosto = '{{ centro.nombre }}';
                    if (centroCosto === categoria) {
                        idCentroCosto = {{ centro.id }};
                    }
                {% endfor %}

                //mostrar si existe el grafico mensual

                $(".preload").removeClass('hidden');

                var mat_datos = {
                    idPlanEstimado: {{ app.session.get('idPlanEstimado') }},
                    centro: idCentroCosto
                };

                $.ajax({
                    type: "POST",
                    dataType: "json",
                    url: '{{ path("dashboardVentaEstimadoCentroCostoMensual") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    var obj = JSON.parse(data);

                    totalEstimadoVentaCentroCostoMes = [];
                    for (n = 0; n < obj.length; n++) {
                        totalEstimadoVentaCentroCostoMes.push({
                            name: obj[n]['mes'],
                            y: parseFloat(obj[n]['totalVentaCentroCostoMes']),
                            color: colorSeleccionado
                        });
                    }

                    $('#nameDivisionVentaMensual').text(' DISTRIBUCIÓN MENSUAL DEL PLAN DE VENTAS EN EL ' + categoria);
                    $('#btnAtrasDivisionVenta').removeClass('hidden');

                    graficoTotalEstimadoVentaCentroCostoMes();

                });
            }

            //Grafico 2do nivel Plan de Ventas por centro de costos
            function graficoTotalEstimadoVentaCentroCosto() {
                var valorMax = totalEstimadoVentaCentroCosto.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoVentaCentroCosto.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoDivisionVenta', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: null
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        type: 'category',
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Presupuesto Estimado',
                            useHTML: true
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            getExtremesFromAll: true,
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, ',', '.');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>' + ' presupuesto asignado ' + '<b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Categorías",
                            "colorByPoint": true,
                            "data": totalEstimadoVentaCentroCosto,
                            events: {
                                click: function (oEvent) {
                                    cargarCentroCosto(oEvent.point.name, oEvent.point.y, oEvent.point.color);
                                }
                            }
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

             //Grafico mensual plan de ventas del centro de costo seleccionado
            function graficoTotalEstimadoVentaCentroCostoMes() {
                var valorMax = totalEstimadoVentaCentroCostoMes.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoVentaCentroCostoMes.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoDivisionVentaMensual', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: null
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        type: 'category',
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Presupuesto Estimado',
                            useHTML: true
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            getExtremesFromAll: true,
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, ',', '.');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>' + ' presupuesto asignado ' + '<b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Categorías",
                            "colorByPoint": true,
                            "data": totalEstimadoVentaCentroCostoMes
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

            //Fin del dashboard de la gestion de ventas

            //Dashboard de Fondo de Salario

            $('#linkSalario').on("click", function () {
                $('#dashboardInicio').css("display", "none");
                $('#dashboardVentas').css("display", "none");
                $('#dashboardEnergia').css("display", "none");
                $('#dashboardOtrosGastos').css("display", "none");
                $('#dashboardMateriasPrimas').css("display", "none");
                $('#dashboardDepreciacion').css("display", "none");
                $('#dashboardAmortizacion').css("display", "none");
                $('#dashboardSalario').css("display", "block");
                graficoTotalEstimadoFondoDivision();
                graficoTotalEstimadoFondoDivisionMes();
            });

            $('#btnAtrasDivisionFondo').on("click", function () {
                $('#btnAtrasDivisionFondo').addClass('hidden');
                graficoTotalEstimadoFondoDivision();
                inicioMensualFondos();
                graficoTotalEstimadoFondoDivisionMes();
                $('#nameDivisionFondo').text(' DISTRIBUCIÓN DEL FONDO DE SALARIO POR DIVISIONES');
                $('#nameDivisionFondoMensual').text(' DISTRIBUCIÓN MENSUAL DEL FONDO DE SALARIO');
            });

            //Grafico principal de fondo de salario por divisiones
            {% for graficoTotal in graficosTotalesEstimadosDivisionesFondos %}
                    totalEstimadoFondoDivision.push({
                        name: '{{ graficoTotal['nombre'] }}',
                        y: parseFloat('{{ graficoTotal['totalSalarioDivision'] }}')
                    });
                    totalEstimadoGSPPDivision.push({
                        name: '{{ graficoTotal['nombre'] }}',
                        y: parseFloat('{{ graficoTotal['totalGastoSalarioPesoProduccion'] }}')
                    });
                    totalEstimadoPTDivision.push({
                        name: '{{ graficoTotal['nombre'] }}',
                        y: parseInt('{{ graficoTotal['totalPromedioTrabajador'] }}')
                    });
                    totalEstimadoSMDivision.push({
                        name: '{{ graficoTotal['nombre'] }}',
                        y: parseFloat('{{ graficoTotal['totalSalarioMedio'] }}')
                    });
            {% endfor %}

            //Grafico principal de fondos por meses
            {% for graficoTotal in graficosTotalesEstimadosMesesFondos %}
                    totalEstimadoFondoDivisionMes.push({
                        name: '{{ graficoTotal['mes'] }}',
                        y: parseFloat('{{ graficoTotal['totalSalarioDivisionMes'] }}')
                    });
                    totalEstimadoGSPPDivisionMes.push({
                        name: '{{ graficoTotal['mes'] }}',
                        y: parseFloat('{{ graficoTotal['totalGastoSalarioPesoProduccionDivisionMes'] }}')
                    });
                    totalEstimadoPTDivisionMes.push({
                        name: '{{ graficoTotal['mes'] }}',
                        y: parseInt('{{ graficoTotal['totalPromedioTrabajadorMes'] }}')
                    });
                    totalEstimadoSMDivisionMes.push({
                        name: '{{ graficoTotal['mes'] }}',
                        y: parseFloat('{{ graficoTotal['totalSalarioMedioDivisionMes'] }}')
                    });
            {% endfor %}

            //Inicio grafico mensual de fondo de salario
            function inicioMensualFondos() {
                totalEstimadoFondoDivisionMes = [];
                totalEstimadoGSPPDivisionMes = [];
                totalEstimadoPTDivisionMes = [];
                totalEstimadoSMDivisionMes = [];
                {% for graficoTotal in graficosTotalesEstimadosMesesFondos %}
                    totalEstimadoFondoDivisionMes.push({
                        name: '{{ graficoTotal['mes'] }}',
                        y: parseFloat('{{ graficoTotal['totalSalarioDivisionMes'] }}')
                    });
                    totalEstimadoGSPPDivisionMes.push({
                        name: '{{ graficoTotal['mes'] }}',
                        y: parseFloat('{{ graficoTotal['totalGastoSalarioPesoProduccionDivisionMes'] }}')
                    });
                    totalEstimadoPTDivisionMes.push({
                        name: '{{ graficoTotal['mes'] }}',
                        y: parseInt('{{ graficoTotal['totalPromedioTrabajadorMes'] }}')
                    });
                    totalEstimadoSMDivisionMes.push({
                        name: '{{ graficoTotal['mes'] }}',
                        y: parseFloat('{{ graficoTotal['totalSalarioMedioDivisionMes'] }}')
                    });
                {% endfor %}
            }

            //Grafico general Plan de Fondo de Salario por divisiones
            function graficoTotalEstimadoFondoDivision() {
                var valorMax = totalEstimadoFondoDivision.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoFondoDivision.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoDivisionFondo', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: null
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        type: 'category',
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Fondo de salario estimado',
                            useHTML: true
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            getExtremesFromAll: true,
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, ',', '.');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>' + ' fondo asignado ' + '<b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Fondo de Salario",
                            "colorByPoint": true,
                            "data": totalEstimadoFondoDivision,
                            events: {
                                click: function (oEvent) {
                                    cargarDivisionFondo(oEvent.point.name, oEvent.point.y, oEvent.point.color);
                                }
                            }
                        },
                        {
                            "name": "GSXPP",
                            "colorByPoint": true,
                            "data": totalEstimadoGSPPDivision
                        },
                        {
                            "name": "Promedio de Trabajadores",
                            "colorByPoint": true,
                            "data": totalEstimadoPTDivision
                        },
                        {
                            "name": "Salario Medio",
                            "colorByPoint": true,
                            "data": totalEstimadoSMDivision
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

            //Cargar el plan de fondos de la division seleccionada
            function cargarDivisionFondo(categoria, presupuesto, colorSeleccionado) {

                var idDivisionCentroCosto = '';

                //mostrar el total del presupuesto
                {% for division in divisionCentrosCostos %}
                    divisionCentroCosto = '{{ division.nombre }}';
                    if (divisionCentroCosto === categoria) {
                        idDivisionCentroCosto = {{ division.id }};
                    }
                {% endfor %}

                //mostrar si existe el grafico mensual

                $(".preload").removeClass('hidden');

                var mat_datos = {
                    idPlanEstimado: {{ app.session.get('idPlanEstimado') }},
                    division: idDivisionCentroCosto
                };

                $.ajax({
                    type: "POST",
                    dataType: "json",
                    url: '{{ path("dashboardSalarioEstimadoDivisionMensual") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    var obj = JSON.parse(data);
                    var divisionMensual = obj['divisionMensual'];
                    var divisionCantroCosto = obj['divisionCentroCosto'];

                    totalEstimadoFondoDivisionMes = [];
                    totalEstimadoGSPPDivisionMes = [];
                    totalEstimadoPTDivisionMes = [];
                    totalEstimadoSMDivisionMes = [];
                    for (n = 0; n < divisionMensual.length; n++) {
                        totalEstimadoFondoDivisionMes.push({
                            name: divisionMensual[n]['mes'],
                            y: parseFloat(divisionMensual[n]['totalSalarioDivisionMes']),
                            color: colorSeleccionado
                        });
                        totalEstimadoGSPPDivisionMes.push({
                            name: divisionMensual[n]['mes'],
                            y: parseFloat(divisionMensual[n]['totalGastoSalarioPesoProduccionDivisionMes']),
                            color: colorSeleccionado
                        });
                        totalEstimadoPTDivisionMes.push({
                            name: divisionMensual[n]['mes'],
                            y: parseInt(divisionMensual[n]['totalPromedioTrabajadorMes']),
                            color: colorSeleccionado
                        });
                        totalEstimadoSMDivisionMes.push({
                            name: divisionMensual[n]['mes'],
                            y: parseFloat(divisionMensual[n]['totalEstimadoSMDivisionMes']),
                            color: colorSeleccionado
                        });
                    }

                    totalEstimadoFondoCentroCosto = [];
                    totalEstimadoGSPPCentroCosto = [];
                    totalEstimadoPTCentroCosto = [];
                    totalEstimadoSMCentroCosto = [];
                    for (n = 0; n < divisionCantroCosto.length; n++) {
                        totalEstimadoFondoCentroCosto.push({
                            name: divisionCantroCosto[n]['centro'],
                            y: parseFloat(divisionCantroCosto[n]['totalSalarioCentroCostoMes']),
                            color: colorSeleccionado
                        });
                        totalEstimadoGSPPCentroCosto.push({
                            name: divisionCantroCosto[n]['centro'],
                            y: parseFloat(divisionCantroCosto[n]['totalGastoSalarioPesoProduccionCentroCostoMes']),
                            color: colorSeleccionado
                        });
                        totalEstimadoPTCentroCosto.push({
                            name: divisionCantroCosto[n]['centro'],
                            y: parseInt(divisionCantroCosto[n]['totalPromedioTrabajadorCentroCostoMes']),
                            color: colorSeleccionado
                        });
                        totalEstimadoSMCentroCosto.push({
                            name: divisionCantroCosto[n]['centro'],
                            y: parseFloat(divisionCantroCosto[n]['totalSalarioMedioCentroCostoMes']),
                            color: colorSeleccionado
                        });
                    }

                    $('#nameDivisionFondo').text(' DISTRIBUCIÓN DEL SALARIO EN LOS CENTROS DE COSTOS DE LA ' + categoria);
                    $('#nameDivisionFondoMensual').text(' DISTRIBUCIÓN MENSUAL DEL PLAN DE SALARIO EN LA ' + categoria);
                    $('#btnAtrasFondoInicio').addClass('hidden');
                    $('#btnAtrasDivisionFondo').removeClass('hidden');

                    graficoTotalEstimadoFondoDivisionMes();
                    graficoTotalEstimadoFondoCentroCosto();
                });
            }

            //Grafico Plan de Fondo Mensual por divisiones
            function graficoTotalEstimadoFondoDivisionMes() {
                var valorMax = totalEstimadoFondoDivisionMes.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoFondoDivisionMes.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoDivisionFondoMensual', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: null
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        type: 'category',
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Fondo de salario estimado',
                            useHTML: true
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            getExtremesFromAll: true,
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, ',', '.');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>' + ' fondo asignado ' + '<b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Fondo de Salario",
                            "colorByPoint": true,
                            "data": totalEstimadoFondoDivisionMes
                        },
                        {
                            "name": "GSXPP",
                            "colorByPoint": true,
                            "data": totalEstimadoGSPPDivisionMes
                        },
                        {
                            "name": "Promedio de Trabajadores",
                            "colorByPoint": true,
                            "data": totalEstimadoPTDivisionMes
                        },
                        {
                            "name": "Salario Medio",
                            "colorByPoint": true,
                            "data": totalEstimadoSMDivisionMes
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

            //Cargar el plan de fondo de la division seleccionada
            function cargarCentroCostoFondo(categoria, presupuesto, colorSeleccionado) {

                //mostrar el total del presupuesto
                {% for centro in centrosCostos %}
                    centroCosto = '{{ centro.nombre }}';
                    if (centroCosto === categoria) {
                        idCentroCosto = {{ centro.id }};
                    }
                {% endfor %}

                //mostrar si existe el grafico mensual

                $(".preload").removeClass('hidden');

                var mat_datos = {
                    idPlanEstimado: {{ app.session.get('idPlanEstimado') }},
                    centro: idCentroCosto
                };

                $.ajax({
                    type: "POST",
                    dataType: "json",
                    url: '{{ path("dashboardFondoEstimadoCentroCostoMensual") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    var obj = JSON.parse(data);

                    totalEstimadoFondoCentroCostoMes = [];
                    totalEstimadoGSPPCentroCostoMes = [];
                    totalEstimadoPTCentroCostoMes = [];
                    totalEstimadoSMCentroCostoMes = [];
                    for (n = 0; n < obj.length; n++) {
                        totalEstimadoFondoCentroCostoMes.push({
                            name: obj[n]['mes'],
                            y: parseFloat(obj[n]['totalSalarioCentroCostoMes']),
                            color: colorSeleccionado
                        });
                        totalEstimadoGSPPCentroCostoMes.push({
                            name: obj[n]['mes'],
                            y: parseFloat(obj[n]['totalGastoSalarioPesoProduccionCentroCostoMes']),
                            color: colorSeleccionado
                        });
                        totalEstimadoPTCentroCostoMes.push({
                            name: obj[n]['mes'],
                            y: parseInt(obj[n]['totalPromedioTrabajadorCentroCostoMes']),
                            color: colorSeleccionado
                        });
                        totalEstimadoSMCentroCostoMes.push({
                            name: obj[n]['mes'],
                            y: parseFloat(obj[n]['totalSalarioMedioCentroCostoMes']),
                            color: colorSeleccionado
                        });
                    }

                    $('#nameDivisionFondoMensual').text(' DISTRIBUCIÓN MENSUAL DEL FONDO DE SALARIO EN EL ' + categoria);
                    $('#btnAtrasDivisionFondo').removeClass('hidden');

                    graficoTotalEstimadoFondoCentroCostoMes();

                });
            }

            //Grafico 2do nivel Plan de Fondo por centro de costos
            function graficoTotalEstimadoFondoCentroCosto() {
                var valorMax = totalEstimadoFondoCentroCosto.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoFondoCentroCosto.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoDivisionFondo', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: null
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        type: 'category',
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Fondo de salario estimado',
                            useHTML: true
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            getExtremesFromAll: true,
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, ',', '.');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>' + ' fondo asignado ' + '<b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Fondo de Salario",
                            "colorByPoint": true,
                            "data": totalEstimadoFondoCentroCosto,
                            events: {
                                click: function (oEvent) {
                                    cargarCentroCostoFondo(oEvent.point.name, oEvent.point.y, oEvent.point.color);
                                }
                            }
                        },
                        {
                            "name": "GSXPP",
                            "colorByPoint": true,
                            "data": totalEstimadoGSPPCentroCosto
                        },
                        {
                            "name": "Promedio de Trabajadores",
                            "colorByPoint": true,
                            "data": totalEstimadoPTCentroCosto
                        },
                        {
                            "name": "Salario Medio",
                            "colorByPoint": true,
                            "data": totalEstimadoSMCentroCosto
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

             //Grafico mensual plan de fondos del centro de costo seleccionado
            function graficoTotalEstimadoFondoCentroCostoMes() {
                var valorMax = totalEstimadoFondoCentroCostoMes.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoFondoCentroCostoMes.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoDivisionFondoMensual', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: null
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        type: 'category',
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Fondo de salario estimado',
                            useHTML: true
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            getExtremesFromAll: true,
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, ',', '.');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>' + ' fondo asignado ' + '<b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Fondo de Salario",
                            "colorByPoint": true,
                            "data": totalEstimadoFondoCentroCostoMes
                        },
                        {
                            "name": "GSXPP",
                            "colorByPoint": true,
                            "data": totalEstimadoGSPPCentroCostoMes
                        },
                        {
                            "name": "Promedio de Trabajadores",
                            "colorByPoint": true,
                            "data": totalEstimadoPTCentroCostoMes
                        },
                        {
                            "name": "Salario Medio",
                            "colorByPoint": true,
                            "data": totalEstimadoSMCentroCostoMes
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

            //Fin del dashboard de Fondo de Salario

            //Dashboard de Energia

            $('#linkEnergia').on("click", function () {
                $('#dashboardInicio').css("display", "none");
                $('#dashboardVentas').css("display", "none");
                $('#dashboardSalario').css("display", "none");
                $('#dashboardOtrosGastos').css("display", "none");
                $('#dashboardMateriasPrimas').css("display", "none");
                $('#dashboardDepreciacion').css("display", "none");
                $('#dashboardAmortizacion').css("display", "none");
                $('#dashboardEnergia').css("display", "block");
                graficoTotalEstimadoEnergiaDivision();
                graficoTotalEstimadoEnergiaDivisionMes();
            });

            $('#btnAtrasDivisionEnergia').on("click", function () {
                $('#btnAtrasDivisionEnergia').addClass('hidden');
                graficoTotalEstimadoEnergiaDivision();
                inicioMensualEnergias();
                graficoTotalEstimadoEnergiaDivisionMes();
                $('#nameDivisionEnergia').text(' DISTRIBUCIÓN DEL KW POR DIVISIONES');
                $('#nameDivisionEnergiaMensual').text(' DISTRIBUCIÓN MENSUAL DEL KW');
            });

            //Grafico principal de kW por divisiones
            {% for graficoTotal in graficosTotalesEstimadosDivisionesEnergias %}
                    nameDivision.push('{{ graficoTotal['nombre'] }}');
                    totalEstimadoEnergiaDivision.push(parseFloat({{ graficoTotal['totalEnergiaPresupuesto'] }}));
                    totalEstimadoKWDivision.push(parseInt({{ graficoTotal['totalKWDivision'] }}));
            {% endfor %}

            //Grafico principal de kW por meses
            {% for graficoTotal in graficosTotalesEstimadosMesesEnergias %}
                    meses.push('{{ graficoTotal['mes'] }}');
                    totalEstimadoEnergiaDivisionMes.push(parseFloat({{ graficoTotal['totalEnergiaPresupuesto'] }}));
                    totalEstimadoKWDivisionMes.push(parseInt({{ graficoTotal['totalKWDivisionMes'] }}));
            {% endfor %}

            //Inicio grafico mensual de Energia
            function inicioMensualEnergias() {
                totalEstimadoEnergiaDivisionMes = [];
                totalEstimadoKWDivisionMes = [];
                {% for graficoTotal in graficosTotalesEstimadosMesesEnergias %}
                    totalEstimadoEnergiaDivisionMes.push({
                        name: '{{ graficoTotal['mes'] }}',
                        y: parseFloat('{{ graficoTotal['totalEnergiaPresupuesto'] }}')
                    });
                    totalEstimadoKWDivisionMes.push({
                        name: '{{ graficoTotal['mes'] }}',
                        y: parseFloat('{{ graficoTotal['totalKWDivisionMes'] }}')
                    });
                {% endfor %}
            }

            //Grafico general Plan de Energia por divisiones
            function graficoTotalEstimadoEnergiaDivision() {
                var valorMax = totalEstimadoEnergiaDivision.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoEnergiaDivision.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoDivisionEnergia', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: null
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        categories: nameDivision,
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Total de kW estimados',
                            align: 'middle',
                            useHTML: true
                        },
                        stackLabels: {
                            enabled: true,
                            style: {
                                fontWeight: 'bold'
                            }
                        }
                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        column: {
                            stacking: 'percent',
                            dataLabels: {
                                enabled: true
                            }
                        },
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, '.', ',');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px"><b>{point.x}</b></span><br>',
                        pointFormat: '<span style="color:{point.color}">{series.name}</span>: <b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Total de kW",
                            "data": totalEstimadoKWDivision,
                            events: {
                                click: function (oEvent) {
                                    cargarDivisionEnergia(oEvent.point.category, oEvent.point.y, oEvent.point.color);
                                }
                            }
                        },
                        {
                            "name": "Total de presupuesto",
                            "data": totalEstimadoEnergiaDivision
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

            //Cargar el plan de Energia de la division seleccionada
            function cargarDivisionEnergia(categoria, presupuesto, colorSeleccionado) {

                var idDivisionCentroCosto = '';

                //mostrar el total del presupuesto
                {% for division in divisionCentrosCostos %}
                    divisionCentroCosto = '{{ division.nombre }}';
                    if (divisionCentroCosto === categoria) {
                        idDivisionCentroCosto = {{ division.id }};
                    }
                {% endfor %}

                //mostrar si existe el grafico mensual

                $(".preload").removeClass('hidden');

                var mat_datos = {
                    idPlanEstimado: {{ app.session.get('idPlanEstimado') }},
                    division: idDivisionCentroCosto
                };

                $.ajax({
                    type: "POST",
                    dataType: "json",
                    url: '{{ path("dashboardEnergiaEstimadoDivisionMensual") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    var obj = JSON.parse(data);
                    var divisionMensual = obj['divisionMensual'];
                    var divisionCantroCosto = obj['divisionCentroCosto'];

                    totalEstimadoEnergiaDivisionMes = [];
                    totalEstimadoKWDivisionMes = [];
                    for (n = 0; n < divisionMensual.length; n++) {
                        totalEstimadoEnergiaDivisionMes.push({
                            name: divisionMensual[n]['mes'],
                            y: parseFloat(divisionMensual[n]['totalEnergiaPresupuesto']),
                            color: colorSeleccionado
                        });
                        totalEstimadoKWDivisionMes.push({
                            name: divisionMensual[n]['mes'],
                            y: parseFloat(divisionMensual[n]['totalKWDivisionMes']),
                            color: colorSeleccionado
                        });
                    }

                    nameCentro = [];
                    totalEstimadoEnergiaCentroCosto = [];
                    totalEstimadoKWCentroCosto = [];
                    for (n = 0; n < divisionCantroCosto.length; n++) {
                        nameCentro.push(divisionCantroCosto[n]['centro']);
                        totalEstimadoEnergiaCentroCosto.push(parseFloat(divisionCantroCosto[n]['totalEnergiaPresupuesto']));
                        totalEstimadoKWCentroCosto.push(parseInt(divisionCantroCosto[n]['totalKWCentroCostoMes']));
                    }

                    $('#nameDivisionEnergia').text(' DISTRIBUCIÓN DE LA ENERGÍA EN LOS CENTROS DE COSTOS DE LA ' + categoria);
                    $('#nameDivisionEnergiaMensual').text(' DISTRIBUCIÓN MENSUAL DE LA ENERGÍA EN LA ' + categoria);
                    $('#btnAtrasEnergiaInicio').addClass('hidden');
                    $('#btnAtrasDivisionEnergia').removeClass('hidden');

                    graficoTotalEstimadoEnergiaDivisionMes();
                    graficoTotalEstimadoEnergiaCentroCosto();
                });
            }

            //Grafico Plan de Energia Mensual por divisiones
            function graficoTotalEstimadoEnergiaDivisionMes() {
                var valorMax = totalEstimadoEnergiaDivisionMes.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoEnergiaDivisionMes.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoDivisionEnergiaMensual', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: null
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        categories: meses,
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Total de kW estimados',
                            align: 'middle',
                            useHTML: true
                        },
                        stackLabels: {
                            enabled: true,
                            style: {
                                fontWeight: 'bold'
                            }
                        }
                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        column: {
                            stacking: 'percent',
                            dataLabels: {
                                enabled: true
                            }
                        },
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, '.', ',');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px"><b>{point.x}</b></span><br>',
                        pointFormat: '<span style="color:{point.color}">{series.name}</span>: <b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Total de kW",
                            "data": totalEstimadoKWDivisionMes
                        },
                        {
                            "name": "Total de presupuesto",
                            "data": totalEstimadoEnergiaDivisionMes
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

            //Cargar el plan de energia de la division seleccionada
            function cargarCentroCostoEnergia(categoria, presupuesto, colorSeleccionado) {

                //mostrar el total del presupuesto
                {% for centro in centrosCostos %}
                    centroCosto = '{{ centro.nombre }}';
                    if (centroCosto === categoria) {
                        idCentroCosto = {{ centro.id }};
                    }
                {% endfor %}

                //mostrar si existe el grafico mensual

                $(".preload").removeClass('hidden');

                var mat_datos = {
                    idPlanEstimado: {{ app.session.get('idPlanEstimado') }},
                    centro: idCentroCosto
                };

                $.ajax({
                    type: "POST",
                    dataType: "json",
                    url: '{{ path("dashboardEnergiaEstimadoCentroCostoMensual") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    var obj = JSON.parse(data);

                    mesesCentroCosto = [];
                    totalEstimadoEnergiaCentroCostoMes = [];
                    totalEstimadoKWCentroCostoMes = [];
                    for (n = 0; n < obj.length; n++) {
                        mesesCentroCosto.push(obj[n]['mes']);
                        totalEstimadoEnergiaCentroCostoMes.push(parseFloat(obj[n]['totalEnergiaPresupuesto']));
                        totalEstimadoKWCentroCostoMes.push(parseInt(obj[n]['totalKWCentroCostoMes']));
                    }

                    $('#nameDivisionEnergiaMensual').text(' DISTRIBUCIÓN MENSUAL DE LA ENERGÍA EN EL ' + categoria);
                    $('#btnAtrasDivisionEnergia').removeClass('hidden');

                    graficoTotalEstimadoEnergiaCentroCostoMes();

                });
            }

            //Grafico 2do nivel Plan de Energia por centro de costos
            function graficoTotalEstimadoEnergiaCentroCosto() {
                var valorMax = totalEstimadoEnergiaCentroCosto.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoEnergiaCentroCosto.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoDivisionEnergia', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: null
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        categories: nameCentro,
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Total de kW estimados',
                            align: 'middle',
                            useHTML: true
                        },
                        stackLabels: {
                            enabled: true,
                            style: {
                                fontWeight: 'bold'
                            }
                        }
                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        column: {
                            stacking: 'percent',
                            dataLabels: {
                                enabled: true
                            }
                        },
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, '.', ',');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px"><b>{point.x}</b></span><br>',
                        pointFormat: '<span style="color:{point.color}">{series.name}</span>: <b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Total de kW",
                            "data": totalEstimadoKWCentroCosto,
                            events: {
                                click: function (oEvent) {
                                    cargarCentroCostoEnergia(oEvent.point.category, oEvent.point.y, oEvent.point.color);
                                }
                            }
                        },
                        {
                            "name": "Total de presupuesto",
                            "data": totalEstimadoEnergiaCentroCosto
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

             //Grafico mensual plan de energia del centro de costo seleccionado
            function graficoTotalEstimadoEnergiaCentroCostoMes() {
                var valorMax = totalEstimadoEnergiaCentroCostoMes.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoEnergiaCentroCostoMes.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoDivisionEnergiaMensual', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: null
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        categories: mesesCentroCosto,
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Total de kW estimados',
                            align: 'middle',
                            useHTML: true
                        },
                        stackLabels: {
                            enabled: true,
                            style: {
                                fontWeight: 'bold'
                            }
                        }
                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        column: {
                            stacking: 'percent',
                            dataLabels: {
                                enabled: true
                            }
                        },
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, '.', ',');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px"><b>{point.x}</b></span><br>',
                        pointFormat: '<span style="color:{point.color}">{series.name}</span>: <b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Total de kW",
                            "data": totalEstimadoKWCentroCostoMes
                        },
                        {
                            "name": "Total de presupuesto",
                            "data": totalEstimadoEnergiaCentroCostoMes
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

            //Fin del dashboard de Energia

            //Dashboard de Otros Gastos Monetarios

            $('#linkOtroGastos').on("click", function () {
                $('#dashboardInicio').css("display", "none");
                $('#dashboardVentas').css("display", "none");
                $('#dashboardEnergia').css("display", "none");
                $('#dashboardSalario').css("display", "none");
                $('#dashboardMateriasPrimas').css("display", "none");
                $('#dashboardDepreciacion').css("display", "none");
                $('#dashboardAmortizacion').css("display", "none");
                $('#dashboardOtrosGastos').css("display", "block");
                graficoTotalEstimadoOtrosGastos();
                graficoTotalEstimadoOtroGastoMes();
            });

            $('#btnAtrasOtroGasto').on("click", function () {
                $('#btnAtrasOtroGasto').addClass('hidden');
                graficoTotalEstimadoOtrosGastos();
                graficoTotalEstimadoOtroGastoMes();
                $('#nameOtroGasto').text(' DISTRIBUCIÓN OTROS GASTOS MONETARIOS');
                $('#nameOtroGastoMensual').text(' DISTRIBUCIÓN MENSUAL DE OTROS GASTOS MONETARIOS');
            });

            $('#btnAtrasOtroGastoDivision').on("click", function () {
                $('#btnAtrasOtroGasto').removeClass('hidden');
                $('#btnAtrasOtroGastoDivision').addClass('hidden');
                graficoTotalEstimadoOtroGastoDivision();
                graficoTotalEstimadoOtroGastoDivisionMes();
                $('#nameOtroGasto').text(' DISTRIBUCIÓN DEL SERVICIO DE ' + otroGasto + ' EN LAS DIVISIONES');
                $('#nameOtroGastoMensual').text(' DISTRIBUCIÓN MENSUAL DEL SERVICIO DE ' + otroGasto);
            });

            //Grafico principal de otros gastos
            {% for graficoTotal in graficosTotalesEstimadosOtrosGastos %}
                    totalEstimadoOtroGasto.push({
                        name: '{{ graficoTotal['nombre'] }}',
                        y: parseFloat('{{ graficoTotal['totalOtroGasto'] }}')
                    });
            {% endfor %}

            //Grafico principal de otros gastos por meses
            {% for graficoTotal in graficosTotalesEstimadosMesesOtrosGastos %}
                    totalEstimadoOtroGastoMes.push({
                        name: '{{ graficoTotal['mes'] }}',
                        y: parseFloat('{{ graficoTotal['totalOtroGasto'] }}')
                    });
            {% endfor %}

            //Grafico general de otros gastos
            function graficoTotalEstimadoOtrosGastos() {
                var valorMax = totalEstimadoOtroGasto.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoOtroGasto.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoOtroGasto', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: null
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        type: 'category',
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Presupuestos estimados',
                            useHTML: true
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            getExtremesFromAll: true,
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, ',', '.');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>' + ' presupuesto asignado ' + '<b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Presupuesto estimado",
                            "colorByPoint": true,
                            "data": totalEstimadoOtroGasto,
                            events: {
                                click: function (oEvent) {
                                    cargarOtroGastoDivision(oEvent.point.name, oEvent.point.y, oEvent.point.color);
                                }
                            }
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

            //Grafico Mensual de otros gastos
            function graficoTotalEstimadoOtroGastoMes() {
                var valorMax = totalEstimadoOtroGastoMes.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoOtroGastoMes.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoOtroGastoMensual', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: null
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        type: 'category',
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Presupuesto estimado',
                            useHTML: true
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            getExtremesFromAll: true,
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, ',', '.');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>' + ' presupuesto asignado ' + '<b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Presupuesto estimado",
                            "colorByPoint": true,
                            "data": totalEstimadoOtroGastoMes
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

            //Cargar el plan de otros gastos del servicio seleccionado
            function cargarOtroGastoDivision(categoria, presupuesto, colorSeleccionado) {

                //mostrar el total del presupuesto
                {% for otro in otrosGastos %}
                    otroGasto = '{{ otro.nombre }}';
                    if (otroGasto === categoria) {
                        idOtroGasto = {{ otro.id }};
                    }
                {% endfor %}

                //mostrar si existe el grafico mensual

                $(".preload").removeClass('hidden');

                var mat_datos = {
                    idPlanEstimado: {{ app.session.get('idPlanEstimado') }},
                    otroGasto: idOtroGasto
                };

                $.ajax({
                    type: "POST",
                    dataType: "json",
                    url: '{{ path("dashboardOtrosGastosEstimadoMensual") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    var obj = JSON.parse(data);
                    var servicioDivision = obj['servicioDivision'];
                    var servicioMensual = obj['servicioMensual'];

                    totalEstimadoOtroGastoDivision = [];
                    for (n = 0; n < servicioDivision.length; n++) {
                        totalEstimadoOtroGastoDivision.push({
                            name: servicioDivision[n]['division'],
                            y: parseFloat(servicioDivision[n]['totalOtroGasto']),
                            color: colorSeleccionado
                        });
                    }

                    totalEstimadoOtroGastoDivisionMes = [];
                    for (n = 0; n < servicioMensual.length; n++) {
                        totalEstimadoOtroGastoDivisionMes.push({
                            name: servicioMensual[n]['mes'],
                            y: parseFloat(servicioMensual[n]['totalOtroGasto']),
                            color: colorSeleccionado
                        });
                    }

                    $('#nameOtroGasto').text(' DISTRIBUCIÓN DEL SERVICIO DE ' + categoria + ' EN LAS DIVISIONES');
                    $('#nameOtroGastoMensual').text(' DISTRIBUCIÓN MENSUAL DEL SERVICIO DE ' + categoria);
                    $('#btnAtrasOtroGasto').removeClass('hidden');
                    $('#btnAtrasOtroGastoDivision').addClass('hidden');
                    otroGasto = categoria;

                    graficoTotalEstimadoOtroGastoDivision();
                    graficoTotalEstimadoOtroGastoDivisionMes();
                });
            }

            //Cargar los centros de costos de la division seleccionada
            function cargarOtroGastoCentroCosto(categoria, presupuesto, colorSeleccionado) {

                //mostrar el total del presupuesto
                {% for division in divisionCentrosCostos %}
                    divisionCentroCosto = '{{ division.nombre }}';
                    if (divisionCentroCosto === categoria) {
                        idDivisionCentroCosto = {{ division.id }};
                    }
                {% endfor %}

                //mostrar si existe el grafico mensual

                $(".preload").removeClass('hidden');

                var mat_datos = {
                    idPlanEstimado: {{ app.session.get('idPlanEstimado') }},
                    division: idDivisionCentroCosto,
                    otroGasto: idOtroGasto
                };

                $.ajax({
                    type: "POST",
                    dataType: "json",
                    url: '{{ path("dashboardOtroGastoEstimadoCentroCostoMensual") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    var obj = JSON.parse(data);
                    var servicioCentroCosto = obj['servicioCentroCosto'];
                    var servicioCentroCostoMensual = obj['servicioCentroCostoMensual'];

                    totalEstimadoOtroGastoCentroCosto = [];
                    for (n = 0; n < servicioCentroCosto.length; n++) {
                        totalEstimadoOtroGastoCentroCosto.push({
                            name: servicioCentroCosto[n]['centro'],
                            y: parseFloat(servicioCentroCosto[n]['totalOtroGasto']),
                            color: colorSeleccionado
                        });
                    }

                    totalEstimadoOtroGastoCentroCostoMes = [];
                    for (n = 0; n < servicioCentroCostoMensual.length; n++) {
                        totalEstimadoOtroGastoCentroCostoMes.push({
                            name: servicioCentroCostoMensual[n]['mes'],
                            y: parseFloat(servicioCentroCostoMensual[n]['totalOtroGasto']),
                            color: colorSeleccionado
                        });
                    }

                    $('#nameOtroGasto').text(' DISTRIBUCIÓN DEL SERVICIO DE ' + otroGasto + ' EN LA DIVISIÓN ' + categoria);
                    $('#nameOtroGastoMensual').text(' DISTRIBUCIÓN MENSUAL DEL SERVICIO DE ' + otroGasto + ' EN LA DIVISIÓN ' + categoria);
                    $('#btnAtrasOtroGastoDivision').removeClass('hidden');
                    $('#btnAtrasOtroGasto').addClass('hidden');

                    graficoTotalEstimadoOtroGastoCentroCosto();
                    graficoTotalEstimadoOtroGastoCentroCostoMes();

                });
            }

            //Grafico 2do nivel por divisiones del servicio seleccionado
            function graficoTotalEstimadoOtroGastoDivision() {
                var valorMax = totalEstimadoOtroGastoDivision.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoOtroGastoDivision.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoOtroGasto', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: null
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        type: 'category',
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Presupuesto estimado',
                            useHTML: true
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            getExtremesFromAll: true,
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, ',', '.');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>' + ' presupuesto asignado ' + '<b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Presupuesto estimado",
                            "colorByPoint": true,
                            "data": totalEstimadoOtroGastoDivision,
                            events: {
                                click: function (oEvent) {
                                    cargarOtroGastoCentroCosto(oEvent.point.name, oEvent.point.y, oEvent.point.color);
                                }
                            }
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

             //Grafico mensual del servicio seleccionado
            function graficoTotalEstimadoOtroGastoDivisionMes() {
                var valorMax = totalEstimadoOtroGastoDivisionMes.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoOtroGastoDivisionMes.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoOtroGastoMensual', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: null
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        type: 'category',
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Presupuesto estimado',
                            useHTML: true
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            getExtremesFromAll: true,
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, ',', '.');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>' + ' presupuesto asignado ' + '<b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Presupuesto Estimado",
                            "colorByPoint": true,
                            "data": totalEstimadoOtroGastoDivisionMes
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

            //Grafico 2do nivel por centro de costo de la division seleccionada
            function graficoTotalEstimadoOtroGastoCentroCosto() {
                var valorMax = totalEstimadoOtroGastoCentroCosto.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoOtroGastoCentroCosto.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoOtroGasto', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: null
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        type: 'category',
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Presupuesto estimado',
                            useHTML: true
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            getExtremesFromAll: true,
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, ',', '.');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>' + ' presupuesto asignado ' + '<b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Presupuesto estimado",
                            "colorByPoint": true,
                            "data": totalEstimadoOtroGastoCentroCosto
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

             //Grafico mensual del division seleccionada
            function graficoTotalEstimadoOtroGastoCentroCostoMes() {
                var valorMax = totalEstimadoOtroGastoCentroCostoMes.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoOtroGastoCentroCostoMes.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoOtroGastoMensual', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: null
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        type: 'category',
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Presupuesto estimado',
                            useHTML: true
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            getExtremesFromAll: true,
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, ',', '.');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>' + ' presupuesto asignado ' + '<b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Presupuesto Estimado",
                            "colorByPoint": true,
                            "data": totalEstimadoOtroGastoCentroCostoMes
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

            //Fin del dashboard de Otros Gastos Monetarios

            //Dashboard de gestion de Materias Primas

            $('#linkMateriasPrimas').on("click", function () {
                $('#dashboardInicio').css("display", "none");
                $('#dashboardSalario').css("display", "none");
                $('#dashboardEnergia').css("display", "none");
                $('#dashboardOtrosGastos').css("display", "none");
                $('#dashboardVentas').css("display", "none");
                $('#dashboardDepreciacion').css("display", "none");
                $('#dashboardAmortizacion').css("display", "none");
                $('#dashboardMateriasPrimas').css("display", "block");
                graficoTotalEstimadoMateriaPrimaDivision();
                graficoTotalEstimadoMateriaPrimaDivisionMes();
            });

            $('#btnAtrasMateriaPrima').on("click", function () {
                $('#btnAtrasMateriaPrima').addClass('hidden');
                graficoTotalEstimadoMateriaPrimaDivision();
                inicioMensualMateriasPrimas();
                graficoTotalEstimadoMateriaPrimaDivisionMes();
                $('#nameMateriaPrima').text(' DISTRIBUCIÓN DEL PLAN DE MATERIAS PRIMAS POR DIVISIONES');
                $('#nameMateriaPrimaMensual').text(' DISTRIBUCIÓN MENSUAL DEL PLAN DE MATERIAS PRIMAS');
            });

            //Grafico principal de ventas por divisiones
            {% for graficoTotal in graficosTotalesEstimadosDivisionesMateriasPrimas %}
                    totalEstimadoMateriaPrimaDivision.push({
                        name: '{{ graficoTotal['nombre'] }}',
                        y: parseInt('{{ graficoTotal['totalMateriaPrima'] }}')
                    });
            {% endfor %}

            //Grafico principal de ventas por meses
            {% for graficoTotal in graficosTotalesEstimadosMesesmateriasPrimas %}
                    totalEstimadoMateriaPrimaDivisionMes.push({
                        name: '{{ graficoTotal['mes'] }}',
                        y: parseInt('{{ graficoTotal['presupuesto'] }}')
                    });
            {% endfor %}

            //Inicio grafico mensual de ventas
            function inicioMensualMateriasPrimas() {
                totalEstimadoMateriaPrimaDivisionMes = [];
                {% for graficoTotal in graficosTotalesEstimadosMesesmateriasPrimas %}
                        totalEstimadoMateriaPrimaDivisionMes.push({
                        name: '{{ graficoTotal['mes'] }}',
                        y: parseInt('{{ graficoTotal['presupuesto'] }}')
                        });
                {% endfor %}
            }

            //Grafico general Plan de Ventas por divisiones
            function graficoTotalEstimadoMateriaPrimaDivision() {
                var valorMax = totalEstimadoMateriaPrimaDivision.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoMateriaPrimaDivision.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoMateriaPrima', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: null
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        type: 'category',
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Presupuesto Estimado',
                            useHTML: true
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            getExtremesFromAll: true,
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, ',', '.');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>' + ' presupuesto asignado ' + '<b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Categorías",
                            "colorByPoint": true,
                            "data": totalEstimadoMateriaPrimaDivision,
                            events: {
                                click: function (oEvent) {
                                    cargarDivisionMateriaPrima(oEvent.point.name, oEvent.point.y, oEvent.point.color);
                                }
                            }
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

            //Cargar el plan de ventas de la division seleccionada
            function cargarDivisionMateriaPrima(categoria, presupuesto, colorSeleccionado) {

                var idDivisionCentroCosto = '';

                //mostrar el total del presupuesto
                {% for division in divisionCentrosCostos %}
                    divisionCentroCosto = '{{ division.nombre }}';
                    if (divisionCentroCosto === categoria) {
                        idDivisionCentroCosto = {{ division.id }};
                    }
                {% endfor %}

                //mostrar si existe el grafico mensual

                $(".preload").removeClass('hidden');

                var mat_datos = {
                    idPlanEstimado: {{ app.session.get('idPlanEstimado') }},
                    division: idDivisionCentroCosto
                };

                $.ajax({
                    type: "POST",
                    dataType: "json",
                    url: '{{ path("dashboardMateriaPrimaEstimadoDivisionMensual") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    var obj = JSON.parse(data);
                    var divisionMensual = obj['divisionMensual'];
                    var divisionCantroCosto = obj['divisionCentroCosto'];

                    totalEstimadoMateriaPrimaDivisionMes = [];
                    for (n = 0; n < divisionMensual.length; n++) {
                        totalEstimadoMateriaPrimaDivisionMes.push({
                            name: divisionMensual[n]['mes'],
                            y: parseFloat(divisionMensual[n]['totalMateriaPrima']),
                            color: colorSeleccionado
                        });
                    }

                    totalEstimadoMateriaPrimaCentroCosto = [];
                    for (n = 0; n < divisionCantroCosto.length; n++) {
                        totalEstimadoMateriaPrimaCentroCosto.push({
                            name: divisionCantroCosto[n]['nombre'],
                            y: parseFloat(divisionCantroCosto[n]['totalMateriaPrima']),
                            color: colorSeleccionado
                        });
                    }

                    $('#nameMateriaPrima').text(' DISTRIBUCIÓN DEL PLAN DE MATERIAS PRIMAS EN LOS CENTROS DE COSTOS DE LA ' + categoria);
                    $('#nameMateriaPrimaMensual').text(' DISTRIBUCIÓN MENSUAL DEL PLAN DE MATERIAS PRIMAS EN LA ' + categoria);
                    $('#btnAtrasMateriaPrima').removeClass('hidden');

                    graficoTotalEstimadoMateriaPrimaDivisionMes();
                    graficoTotalEstimadoMateriaPrimaCentroCosto();

                });
            }

            //Grafico Plan de Ventas Mensual por divisiones
            function graficoTotalEstimadoMateriaPrimaDivisionMes() {
                var valorMax = totalEstimadoMateriaPrimaDivisionMes.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoMateriaPrimaDivisionMes.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoMateriaPrimaMensual', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: null
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        type: 'category',
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Presupuesto Estimado',
                            useHTML: true
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            getExtremesFromAll: true,
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, ',', '.');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>' + ' presupuesto asignado ' + '<b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Categorías",
                            "colorByPoint": true,
                            "data": totalEstimadoMateriaPrimaDivisionMes
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

            //Cargar el plan de ventas de la division seleccionada
            function cargarCentroCostoMateriaPrima(categoria, presupuesto, colorSeleccionado) {

                //mostrar el total del presupuesto
                {% for centro in centrosCostos %}
                    centroCosto = '{{ centro.nombre }}';
                    if (centroCosto === categoria) {
                        idCentroCosto = {{ centro.id }};
                    }
                {% endfor %}

                //mostrar si existe el grafico mensual

                $(".preload").removeClass('hidden');

                var mat_datos = {
                    idPlanEstimado: {{ app.session.get('idPlanEstimado') }},
                    centro: idCentroCosto
                };

                $.ajax({
                    type: "POST",
                    dataType: "json",
                    url: '{{ path("dashboardMateriaPrimaEstimadoCentroCostoMensual") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    var obj = JSON.parse(data);

                    totalEstimadoMateriaPrimaCentroCostoMes = [];
                    for (n = 0; n < obj.length; n++) {
                        totalEstimadoMateriaPrimaCentroCostoMes.push({
                            name: obj[n]['mes'],
                            y: parseFloat(obj[n]['totalMateriaPrima']),
                            color: colorSeleccionado
                        });
                    }

                    $('#nameMateriaPrimaMensual').text(' DISTRIBUCIÓN MENSUAL DEL PLAN DE MATERIAS PRIMAS EN EL ' + categoria);
                    $('#btnAtrasMateriaPrima').removeClass('hidden');

                    graficoTotalEstimadoMateriaPrimaCentroCostoMes();

                });
            }

            //Grafico 2do nivel Plan de Ventas por centro de costos
            function graficoTotalEstimadoMateriaPrimaCentroCosto() {
                var valorMax = totalEstimadoMateriaPrimaCentroCosto.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoMateriaPrimaCentroCosto.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoMateriaPrima', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: null
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        type: 'category',
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Presupuesto Estimado',
                            useHTML: true
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            getExtremesFromAll: true,
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, ',', '.');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>' + ' presupuesto asignado ' + '<b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Categorías",
                            "colorByPoint": true,
                            "data": totalEstimadoMateriaPrimaCentroCosto,
                            events: {
                                click: function (oEvent) {
                                    cargarCentroCostoMateriaPrima(oEvent.point.name, oEvent.point.y, oEvent.point.color);
                                }
                            }
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

             //Grafico mensual plan de ventas del centro de costo seleccionado
            function graficoTotalEstimadoMateriaPrimaCentroCostoMes() {
                var valorMax = totalEstimadoMateriaPrimaCentroCostoMes.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoMateriaPrimaCentroCostoMes.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoMateriaPrimaMensual', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: null
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        type: 'category',
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Presupuesto Estimado',
                            useHTML: true
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            getExtremesFromAll: true,
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, ',', '.');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>' + ' presupuesto asignado ' + '<b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Categorías",
                            "colorByPoint": true,
                            "data": totalEstimadoMateriaPrimaCentroCostoMes
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

            //Fin del dashboard de la gestion de Materias Primas

            //Dashboard de gestion de Depreciación

            $('#linkDepreciacion').on("click", function () {
                $('#dashboardInicio').css("display", "none");
                $('#dashboardSalario').css("display", "none");
                $('#dashboardEnergia').css("display", "none");
                $('#dashboardOtrosGastos').css("display", "none");
                $('#dashboardVentas').css("display", "none");
                $('#dashboardMateriasPrimas').css("display", "none");
                $('#dashboardAmortizacion').css("display", "none");
                $('#dashboardDepreciacion').css("display", "block");
                graficoTotalEstimadoDepreciacionDivision();
                graficoTotalEstimadoDepreciacionDivisionMes();
            });

            $('#btnAtrasDepreciacion').on("click", function () {
                $('#btnAtrasDepreciacion').addClass('hidden');
                graficoTotalEstimadoDepreciacionDivision();
                inicioMensualDepreciacion();
                graficoTotalEstimadoDepreciacionDivisionMes();
                $('#nameDepreciacionMostrar').text(' DISTRIBUCIÓN DEL PLAN DE DEPRECIACIÓN POR DIVISIONES');
                $('#nameDepreciacionMensual').text(' DISTRIBUCIÓN MENSUAL DEL PLAN DE DEPRECIACIÓN');
            });

            //Grafico principal de ventas por divisiones
            {% for graficoTotal in graficosTotalesEstimadosDivisionesDepreciaciones %}
                    totalEstimadoDepreciacionDivision.push({
                        name: '{{ graficoTotal['nombre'] }}',
                        y: parseInt('{{ graficoTotal['totalDepreciacion'] }}')
                    });
            {% endfor %}

            //Grafico principal de ventas por meses
            {% for graficoTotal in graficosTotalesEstimadosMesesDepreciaciones %}
                    totalEstimadoDepreciacionDivisionMes.push({
                        name: '{{ graficoTotal['mes'] }}',
                        y: parseInt('{{ graficoTotal['presupuesto'] }}')
                    });
            {% endfor %}

            //Inicio grafico mensual de ventas
            function inicioMensualDepreciacion() {
                totalEstimadoDepreciacionDivisionMes = [];
                {% for graficoTotal in graficosTotalesEstimadosMesesDepreciaciones %}
                        totalEstimadoDepreciacionDivisionMes.push({
                        name: '{{ graficoTotal['mes'] }}',
                        y: parseInt('{{ graficoTotal['presupuesto'] }}')
                        });
                {% endfor %}
            }

            //Grafico general Plan de Ventas por divisiones
            function graficoTotalEstimadoDepreciacionDivision() {
                var valorMax = totalEstimadoDepreciacionDivision.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoDepreciacionDivision.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoDepreciacion', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: null
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        type: 'category',
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Presupuesto Estimado',
                            useHTML: true
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            getExtremesFromAll: true,
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, ',', '.');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>' + ' presupuesto asignado ' + '<b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Categorías",
                            "colorByPoint": true,
                            "data": totalEstimadoDepreciacionDivision,
                            events: {
                                click: function (oEvent) {
                                    cargarDivisionDepreciacion(oEvent.point.name, oEvent.point.y, oEvent.point.color);
                                }
                            }
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

            //Cargar el plan de ventas de la division seleccionada
            function cargarDivisionDepreciacion(categoria, presupuesto, colorSeleccionado) {

                var idDivisionCentroCosto = '';

                //mostrar el total del presupuesto
                {% for division in divisionCentrosCostos %}
                    divisionCentroCosto = '{{ division.nombre }}';
                    if (divisionCentroCosto === categoria) {
                        idDivisionCentroCosto = {{ division.id }};
                    }
                {% endfor %}

                //mostrar si existe el grafico mensual

                $(".preload").removeClass('hidden');

                var mat_datos = {
                    idPlanEstimado: {{ app.session.get('idPlanEstimado') }},
                    division: idDivisionCentroCosto
                };

                $.ajax({
                    type: "POST",
                    dataType: "json",
                    url: '{{ path("dashboardDepreciacionEstimadoDivisionMensual") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    var obj = JSON.parse(data);
                    var divisionMensual = obj['divisionMensual'];
                    var divisionCantroCosto = obj['divisionCentroCosto'];

                    totalEstimadoDepreciacionDivisionMes = [];
                    for (n = 0; n < divisionMensual.length; n++) {
                        totalEstimadoDepreciacionDivisionMes.push({
                            name: divisionMensual[n]['mes'],
                            y: parseFloat(divisionMensual[n]['totalDepreciacion']),
                            color: colorSeleccionado
                        });
                    }

                    totalEstimadoDepreciacionCentroCosto = [];
                    for (n = 0; n < divisionCantroCosto.length; n++) {
                        totalEstimadoDepreciacionCentroCosto.push({
                            name: divisionCantroCosto[n]['nombre'],
                            y: parseFloat(divisionCantroCosto[n]['totalDepreciacion']),
                            color: colorSeleccionado
                        });
                    }

                    $('#nameDepreciacionMostrar').text(' DISTRIBUCIÓN DEL PLAN DE DEPRECIACIÓN EN LOS CENTROS DE COSTOS DE LA ' + categoria);
                    $('#nameDepreciacionMensual').text(' DISTRIBUCIÓN MENSUAL DEL PLAN DE DEPRECIACIÓN EN LA ' + categoria);
                    $('#btnAtrasDepreciacion').removeClass('hidden');

                    graficoTotalEstimadoDepreciacionDivisionMes();
                    graficoTotalEstimadoDepreciacionCentroCosto();

                });
            }

            //Grafico Plan de Ventas Mensual por divisiones
            function graficoTotalEstimadoDepreciacionDivisionMes() {
                var valorMax = totalEstimadoDepreciacionDivisionMes.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoDepreciacionDivisionMes.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoDepreciacionMensual', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: null
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        type: 'category',
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Presupuesto Estimado',
                            useHTML: true
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            getExtremesFromAll: true,
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, ',', '.');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>' + ' presupuesto asignado ' + '<b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Categorías",
                            "colorByPoint": true,
                            "data": totalEstimadoDepreciacionDivisionMes
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

            //Cargar el plan de ventas de la division seleccionada
            function cargarCentroCostoDepreciacion(categoria, presupuesto, colorSeleccionado) {

                //mostrar el total del presupuesto
                {% for centro in centrosCostos %}
                    centroCosto = '{{ centro.nombre }}';
                    if (centroCosto === categoria) {
                        idCentroCosto = {{ centro.id }};
                    }
                {% endfor %}

                //mostrar si existe el grafico mensual

                $(".preload").removeClass('hidden');

                var mat_datos = {
                    idPlanEstimado: {{ app.session.get('idPlanEstimado') }},
                    centro: idCentroCosto
                };

                $.ajax({
                    type: "POST",
                    dataType: "json",
                    url: '{{ path("dashboardDepreciacionEstimadoCentroCostoMensual") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    var obj = JSON.parse(data);

                    totalEstimadoDepreciacionCentroCostoMes = [];
                    for (n = 0; n < obj.length; n++) {
                        totalEstimadoDepreciacionCentroCostoMes.push({
                            name: obj[n]['mes'],
                            y: parseFloat(obj[n]['totalDepreciacion']),
                            color: colorSeleccionado
                        });
                    }

                    $('#nameDepreciacionMensual').text(' DISTRIBUCIÓN MENSUAL DEL PLAN DE DEPRECIACIÓN EN EL ' + categoria);
                    $('#btnAtrasDepreciacion').removeClass('hidden');

                    graficoTotalEstimadoDepreciacionCentroCostoMes();

                });
            }

            //Grafico 2do nivel Plan de Ventas por centro de costos
            function graficoTotalEstimadoDepreciacionCentroCosto() {
                var valorMax = totalEstimadoDepreciacionCentroCosto.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoDepreciacionCentroCosto.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoDepreciacion', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: null
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        type: 'category',
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Presupuesto Estimado',
                            useHTML: true
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            getExtremesFromAll: true,
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, ',', '.');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>' + ' presupuesto asignado ' + '<b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Categorías",
                            "colorByPoint": true,
                            "data": totalEstimadoDepreciacionCentroCosto,
                            events: {
                                click: function (oEvent) {
                                    cargarCentroCostoDepreciacion(oEvent.point.name, oEvent.point.y, oEvent.point.color);
                                }
                            }
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

             //Grafico mensual plan de ventas del centro de costo seleccionado
            function graficoTotalEstimadoDepreciacionCentroCostoMes() {
                var valorMax = totalEstimadoDepreciacionCentroCostoMes.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoDepreciacionCentroCostoMes.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoDepreciacionMensual', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: null
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        type: 'category',
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Presupuesto Estimado',
                            useHTML: true
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            getExtremesFromAll: true,
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, ',', '.');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>' + ' presupuesto asignado ' + '<b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Categorías",
                            "colorByPoint": true,
                            "data": totalEstimadoDepreciacionCentroCostoMes
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

            //Fin del dashboard de la gestion de Depreciación

            //Dashboard de gestion de Amortización

            $('#linkAmortizacion').on("click", function () {
                $('#dashboardInicio').css("display", "none");
                $('#dashboardSalario').css("display", "none");
                $('#dashboardEnergia').css("display", "none");
                $('#dashboardOtrosGastos').css("display", "none");
                $('#dashboardVentas').css("display", "none");
                $('#dashboardMateriasPrimas').css("display", "none");
                $('#dashboardDepreciacion').css("display", "none");
                $('#dashboardAmortizacion').css("display", "block");
                graficoTotalEstimadoAmortizacionDivision();
                graficoTotalEstimadoAmortizacionDivisionMes();
            });

            $('#btnAtrasAmortizacion').on("click", function () {
                $('#btnAtrasAmortizacion').addClass('hidden');
                graficoTotalEstimadoAmortizacionDivision();
                inicioMensualAmortizacion();
                graficoTotalEstimadoAmortizacionDivisionMes();
                $('#nameAmortizacionMostrar').text(' DISTRIBUCIÓN DEL PLAN DE AMORTIZACIÓN POR DIVISIONES');
                $('#nameAmortizacionMensual').text(' DISTRIBUCIÓN MENSUAL DEL PLAN DE AMORTIZACIÓN');
            });

            //Grafico principal de ventas por divisiones
            {% for graficoTotal in graficosTotalesEstimadosDivisionesAmortizaciones %}
                    totalEstimadoAmortizacionDivision.push({
                        name: '{{ graficoTotal['nombre'] }}',
                        y: parseInt('{{ graficoTotal['totalAmortizacion'] }}')
                    });
            {% endfor %}

            //Grafico principal de ventas por meses
            {% for graficoTotal in graficosTotalesEstimadosMesesAmortizaciones %}
                    totalEstimadoAmortizacionDivisionMes.push({
                        name: '{{ graficoTotal['mes'] }}',
                        y: parseInt('{{ graficoTotal['presupuesto'] }}')
                    });
            {% endfor %}

            //Inicio grafico mensual de ventas
            function inicioMensualAmortizacion() {
                totalEstimadoAmortizacionDivisionMes = [];
                {% for graficoTotal in graficosTotalesEstimadosMesesAmortizaciones %}
                        totalEstimadoAmortizacionDivisionMes.push({
                        name: '{{ graficoTotal['mes'] }}',
                        y: parseInt('{{ graficoTotal['presupuesto'] }}')
                        });
                {% endfor %}
            }

            //Grafico general Plan de Ventas por divisiones
            function graficoTotalEstimadoAmortizacionDivision() {
                var valorMax = totalEstimadoAmortizacionDivision.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoAmortizacionDivision.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoAmortizacion', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: null
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        type: 'category',
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Presupuesto Estimado',
                            useHTML: true
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            getExtremesFromAll: true,
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, ',', '.');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>' + ' presupuesto asignado ' + '<b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Categorías",
                            "colorByPoint": true,
                            "data": totalEstimadoAmortizacionDivision,
                            events: {
                                click: function (oEvent) {
                                    cargarDivisionAmortizacion(oEvent.point.name, oEvent.point.y, oEvent.point.color);
                                }
                            }
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

            //Cargar el plan de ventas de la division seleccionada
            function cargarDivisionAmortizacion(categoria, presupuesto, colorSeleccionado) {

                var idDivisionCentroCosto = '';

                //mostrar el total del presupuesto
                {% for division in divisionCentrosCostos %}
                    divisionCentroCosto = '{{ division.nombre }}';
                    if (divisionCentroCosto === categoria) {
                        idDivisionCentroCosto = {{ division.id }};
                    }
                {% endfor %}

                //mostrar si existe el grafico mensual

                $(".preload").removeClass('hidden');

                var mat_datos = {
                    idPlanEstimado: {{ app.session.get('idPlanEstimado') }},
                    division: idDivisionCentroCosto
                };

                $.ajax({
                    type: "POST",
                    dataType: "json",
                    url: '{{ path("dashboardAmortizacionEstimadoDivisionMensual") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    var obj = JSON.parse(data);
                    var divisionMensual = obj['divisionMensual'];
                    var divisionCantroCosto = obj['divisionCentroCosto'];

                    totalEstimadoAmortizacionDivisionMes = [];
                    for (n = 0; n < divisionMensual.length; n++) {
                        totalEstimadoAmortizacionDivisionMes.push({
                            name: divisionMensual[n]['mes'],
                            y: parseFloat(divisionMensual[n]['totalAmortizacion']),
                            color: colorSeleccionado
                        });
                    }

                    totalEstimadoAmortizacionCentroCosto = [];
                    for (n = 0; n < divisionCantroCosto.length; n++) {
                        totalEstimadoAmortizacionCentroCosto.push({
                            name: divisionCantroCosto[n]['nombre'],
                            y: parseFloat(divisionCantroCosto[n]['totalAmortizacion']),
                            color: colorSeleccionado
                        });
                    }

                    $('#nameAmortizacionMostrar').text(' DISTRIBUCIÓN DEL PLAN DE AMORTIZACIÓN EN LOS CENTROS DE COSTOS DE LA ' + categoria);
                    $('#nameAmortizacionMensual').text(' DISTRIBUCIÓN MENSUAL DEL PLAN DE AMORTIZACIÓN EN LA ' + categoria);
                    $('#btnAtrasAmortizacion').removeClass('hidden');

                    graficoTotalEstimadoAmortizacionDivisionMes();
                    graficoTotalEstimadoAmortizacionCentroCosto();

                });
            }

            //Grafico Plan de Ventas Mensual por divisiones
            function graficoTotalEstimadoAmortizacionDivisionMes() {
                var valorMax = totalEstimadoAmortizacionDivisionMes.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoAmortizacionDivisionMes.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoAmortizacionMensual', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: null
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        type: 'category',
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Presupuesto Estimado',
                            useHTML: true
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            getExtremesFromAll: true,
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, ',', '.');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>' + ' presupuesto asignado ' + '<b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Categorías",
                            "colorByPoint": true,
                            "data": totalEstimadoAmortizacionDivisionMes
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

            //Cargar el plan de ventas de la division seleccionada
            function cargarCentroCostoAmortizacion(categoria, presupuesto, colorSeleccionado) {

                //mostrar el total del presupuesto
                {% for centro in centrosCostos %}
                    centroCosto = '{{ centro.nombre }}';
                    if (centroCosto === categoria) {
                        idCentroCosto = {{ centro.id }};
                    }
                {% endfor %}

                //mostrar si existe el grafico mensual

                $(".preload").removeClass('hidden');

                var mat_datos = {
                    idPlanEstimado: {{ app.session.get('idPlanEstimado') }},
                    centro: idCentroCosto
                };

                $.ajax({
                    type: "POST",
                    dataType: "json",
                    url: '{{ path("dashboardAmortizacionEstimadoCentroCostoMensual") }}',
                    data: mat_datos
                }).done(function (data) {

                    $(".preload").addClass('hidden');
                    var obj = JSON.parse(data);

                    totalEstimadoAmortizacionCentroCostoMes = [];
                    for (n = 0; n < obj.length; n++) {
                        totalEstimadoAmortizacionCentroCostoMes.push({
                            name: obj[n]['mes'],
                            y: parseFloat(obj[n]['totalAmortizacion']),
                            color: colorSeleccionado
                        });
                    }

                    $('#nameAmortizacionMensual').text(' DISTRIBUCIÓN MENSUAL DEL PLAN DE AMORTIZACIÓN EN EL ' + categoria);
                    $('#btnAtrasAmortizacion').removeClass('hidden');

                    graficoTotalEstimadoAmortizacionCentroCostoMes();

                });
            }

            //Grafico 2do nivel Plan de Ventas por centro de costos
            function graficoTotalEstimadoAmortizacionCentroCosto() {
                var valorMax = totalEstimadoAmortizacionCentroCosto.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoAmortizacionCentroCosto.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoAmortizacion', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: null
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        type: 'category',
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Presupuesto Estimado',
                            useHTML: true
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            getExtremesFromAll: true,
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, ',', '.');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>' + ' presupuesto asignado ' + '<b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Categorías",
                            "colorByPoint": true,
                            "data": totalEstimadoAmortizacionCentroCosto,
                            events: {
                                click: function (oEvent) {
                                    cargarCentroCostoAmortizacion(oEvent.point.name, oEvent.point.y, oEvent.point.color);
                                }
                            }
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

             //Grafico mensual plan de ventas del centro de costo seleccionado
            function graficoTotalEstimadoAmortizacionCentroCostoMes() {
                var valorMax = totalEstimadoAmortizacionCentroCostoMes.length - 1;
                var valorScrollbar = false;
                if (totalEstimadoAmortizacionCentroCostoMes.length > 6) {
                    valorMax = 5;
                    valorScrollbar = true;
                }
                Highcharts.chart('graficoAmortizacionMensual', {
                    chart: {
                        type: 'column'
                    },
                    title: {
                        text: null
                    },
                    exporting: {
                        enabled: false
                    },
                    scrollbar: {
                        enabled: valorScrollbar,
                        liveRedraw: true,
                        step: 1
                    },
                    xAxis: {
                        type: 'category',
                        min: 0,
                        max: valorMax,
                        useHTML: true
                    },
                    yAxis: {
                        title: {
                            text: 'Presupuesto Estimado',
                            useHTML: true
                        }

                    },
                    legend: {
                        enabled: false
                    },
                    plotOptions: {
                        series: {
                            borderWidth: 0,
                            allowPointSelect: true,
                            cursor: 'pointer',
                            getExtremesFromAll: true,
                            dataLabels: {
                                enabled: true,
                                formatter: function () {
                                    return Highcharts.numberFormat(this.y, 0, ',', '.');
                                }
                            }
                        }
                    },
                    tooltip: {
                        headerFormat: '<span style="font-size:11px">{series.name}</span><br>',
                        pointFormat: '<span style="color:{point.color}">{point.name}</span>' + ' presupuesto asignado ' + '<b>{point.y:,.0f}</b>'
                    },

                    "series": [
                        {
                            "name": "Categorías",
                            "colorByPoint": true,
                            "data": totalEstimadoAmortizacionCentroCostoMes
                        }
                    ],
                    responsive: {
                        rules: [{
                            condition: {
                                maxWidth: 800
                            },
                            chartOptions: {
                                scrollbar: {
                                    enabled: true
                                },
                                xAxis: {
                                    min: 0,
                                    max: 1,
                                    useHTML: true
                                }
                            }
                        }]
                    }
                });
            }

            //Fin del dashboard de la gestion de Amortización


        });
    </script>

{% endblock %}